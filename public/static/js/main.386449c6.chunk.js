(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{76:function(e,t,n){},77:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(23),s=n.n(r),i=(n(76),n(30)),a=n(6),o=(n(77),n(12)),l=n(22),j=n(54),u=n(67),d=n(49),b=n(0);var h=function(){return Object(b.jsxs)(j.a,{bg:"dark",variant:"dark",children:[Object(b.jsx)(j.a.Brand,{children:Object(b.jsx)(d.a,{src:"https://t4.ftcdn.net/jpg/04/11/39/77/360_F_411397771_TYwKZCENTf7RJUuxll4tqjrxbkvkAC9U.jpg",width:"75",height:"75",className:"d-inline-block align-top",alt:"Sunil's Gym Logo",roundedCircle:!0})}),Object(b.jsx)(j.a.Brand,{children:"Sunil's BlogSpot"}),Object(b.jsxs)(u.a,{children:[Object(b.jsx)(l.b,{to:"/",exact:!0,style:{color:"white"},children:"Home Page"}),Object(b.jsx)(l.b,{to:"/blogs",exact:!0,style:{color:"white"},children:"Blogs"}),Object(b.jsx)(l.b,{to:"/createpost",exact:!0,style:{color:"white"},children:"Create Post"})]})]})},O=n(8),x=n(10);var p=function(e){var t=e.setCurrentUser,n=Object(c.useState)(""),r=Object(a.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(""),l=Object(a.a)(o,2),j=l[0],u=l[1],d=Object(c.useState)([]),h=Object(a.a)(d,2),p=h[0],f=h[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(O.a,{onSubmit:function(e){e.preventDefault();var n={username:s,password:j};fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){e.ok?e.json().then((function(e){return t(e)})):e.json().then((function(e){return f(e.errors)}))}))},children:[Object(b.jsxs)(O.a.Group,{className:"mb-3",children:[Object(b.jsx)(O.a.Label,{children:"Username"}),Object(b.jsx)("input",{type:"text",id:"username",value:s,onChange:function(e){return i(e.target.value)}})]}),Object(b.jsxs)(O.a.Group,{className:"mb-3",children:[Object(b.jsx)(O.a.Label,{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",id:"password",value:j,onChange:function(e){return u(e.target.value)}})]}),Object(b.jsx)(x.a,{type:"submit",children:"Log In"})]}),p?p.map((function(e){return Object(b.jsx)("p",{children:e},e)})):null]})};var f=function(e){var t=e.setCurrentUser,n=Object(c.useState)(""),r=Object(a.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(""),l=Object(a.a)(o,2),j=l[0],u=l[1],d=Object(c.useState)(""),h=Object(a.a)(d,2),p=h[0],f=h[1],m=Object(c.useState)([]),g=Object(a.a)(m,2),v=g[0],C=g[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(O.a,{onSubmit:function(e){e.preventDefault();var n={username:s,password:j,avatar:p};fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){e.ok?e.json().then((function(e){return t(e)})):e.json().then((function(e){return C(e.errors)}))}))},children:[Object(b.jsx)(O.a.Group,{className:"mb-3",children:Object(b.jsxs)(O.a.Label,{children:["Username",Object(b.jsx)(O.a.Control,{type:"text",id:"username",value:s,onChange:function(e){return i(e.target.value)}})]})}),Object(b.jsx)(O.a.Group,{className:"mb-3",children:Object(b.jsxs)(O.a.Label,{children:["Password",Object(b.jsx)(O.a.Control,{type:"password",id:"password",value:j,onChange:function(e){return u(e.target.value)}})]})}),Object(b.jsx)(O.a.Group,{className:"mb-3",children:Object(b.jsxs)(O.a.Label,{children:["Avatar",Object(b.jsx)(O.a.Control,{type:"text",id:"avatar",value:p,onChange:function(e){return f(e.target.value)}})]})}),Object(b.jsx)(x.a,{type:"submit",children:"Sign Up"})]}),v?v.map((function(e){return Object(b.jsx)("p",{children:e},e)})):null]})};var m=function(e){var t=e.setCurrentUser,n=Object(c.useState)(!0),r=Object(a.a)(n,2),s=r[0],i=r[1];return Object(b.jsx)("div",{style:{alignItems:"center",justifyContent:"center",height:"50vh"},children:s?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{setCurrentUser:t}),Object(b.jsxs)("p",{children:["Don't have an account?",Object(b.jsx)(x.a,{onClick:function(){return i(!1)},children:"Sign Up"})]})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{setCurrentUser:t}),Object(b.jsxs)("p",{children:["Already have an account?",Object(b.jsx)(x.a,{onClick:function(){return i(!0)},children:"Log In"})]})]})})},g=n(33);var v=function(e){var t=e.blog,n=e.setSelectedBlog,c=e.addViewCount;return Object(b.jsx)(u.a,{children:Object(b.jsxs)(g.a,{style:{width:"18rem"},bg:"light",border:"dark",children:[Object(b.jsx)(l.b,{to:"/blogs/".concat(t.id),exact:!0,onClick:function(){n(t),c(t)},children:Object(b.jsx)(g.a.Title,{children:t.title})}),Object(b.jsxs)("p",{children:["Posted by: ",t.user.username]}),Object(b.jsxs)("small",{className:"text-muted",children:["Views: ",t.views]})]})})};var C=function(e){var t=e.blogs,n=e.setSelectedBlog,c=e.addViewCount;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",alignItems:"center",justifyContent:"center",height:"50vh"},children:t.map((function(e){return Object(b.jsx)(v,{blog:e,setSelectedBlog:n,addViewCount:c},e.id)}))})})};var y=function(e){var t=e.comment,n=e.updateComment;return Object(b.jsx)("ul",{style:{listStyleType:"none"},children:Object(b.jsxs)("li",{children:[Object(b.jsxs)("p",{children:[t.content," - ",t.user.username]}),Object(b.jsx)(x.a,{variant:"outline-success",onClick:function(e){e.preventDefault(),fetch("/comments/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({likes:parseInt(t.likes)+1})}).then((function(e){return e.json()})).then((function(e){return n(e)}))},children:Object(b.jsxs)("span",{role:"img","aria-label":"like",children:["\ud83d\udc4d",t.likes]})}),Object(b.jsx)(x.a,{variant:"outline-danger",onClick:function(e){e.preventDefault(),fetch("/comments/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({dislikes:parseInt(t.dislikes)+1})}).then((function(e){return e.json()})).then((function(e){return n(e)}))},children:Object(b.jsxs)("span",{role:"img","aria-label":"dislike",children:["\ud83d\udc4e",t.dislikes]})})]})})};var S=function(e){var t=e.blog,n=e.currentUser,r=e.onAddComment,s=Object(c.useState)(""),i=Object(a.a)(s,2),o=i[0],l=i[1],j=Object(c.useState)([]),u=Object(a.a)(j,2),d=u[0],h=u[1];return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={content:o,blog_id:t.id,user_id:n.id,likes:0,dislikes:0};fetch("/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){e.ok?e.json().then((function(e){return r(e)})):e.json().then((function(e){return h(e.errors)})),l("")}))},children:[Object(b.jsxs)("label",{children:["Comment:",Object(b.jsx)("input",{type:"text",name:"content",value:o,onChange:function(e){return l(e.target.value)}})]}),d?d.map((function(e){return Object(b.jsx)("p",{children:e},e)})):null,Object(b.jsx)(x.a,{type:"submit",children:"Leave Comment"})]})})})},k=n(40);var w=function(e){var t=e.selectedBlog,n=e.currentUser,r=(e.setSelectedBlog,Object(c.useState)(!1)),s=Object(a.a)(r,2),o=s[0],j=s[1],u=Object(c.useState)(t),d=Object(a.a)(u,2),h=d[0],O=d[1],p=Object(c.useState)(t.comments),f=Object(a.a)(p,2),m=f[0],g=f[1];function v(e){var t=m.map((function(t){return t.id===e.id?e:t}));g(t)}return Object(c.useEffect)((function(){var e=window.location.pathname.split("/")[2];e&&fetch("/blogs/".concat(e)).then((function(e){return e.json()})).then((function(e){O(e),g(e.comments)}))}),[]),Object(b.jsxs)(k.a.Dialog,{children:[Object(b.jsxs)(k.a.Title,{children:[Object(b.jsx)("h1",{children:h.title}),Object(b.jsx)("h3",{children:h.topic}),Object(b.jsxs)("h4",{children:["Author: ",h.user&&h.user.username]})]}),Object(b.jsx)(k.a.Body,{children:Object(b.jsx)("p",{children:h.content})}),Object(b.jsx)("br",{}),Object(b.jsxs)(k.a.Footer,{style:{alignItems:"center",justifyContent:"center"},children:[Object(b.jsx)("h5",{style:{display:"inline-block"},children:"Comments"}),o?null:Object(b.jsx)(x.a,{onClick:function(){j((function(e){return!e}))},children:"Leave a Comment"})]}),o?Object(b.jsx)(S,{blog:h,currentUser:n,onAddComment:function(e){g((function(t){return[].concat(Object(i.a)(t),[e])}))}}):null,m&&m.map((function(e){return Object(b.jsx)(y,{comment:e,updateComment:v},e.id)})),Object(b.jsx)(l.b,{to:"/blogs",children:Object(b.jsx)("p",{children:"Return to Blogs"})})]})},B=n(70);var T=function(e){var t=e.blog,n=e.onUpdateBlog,r=e.currentUser,s=e.handleDelete,i=Object(c.useState)(t.title),o=Object(a.a)(i,2),l=o[0],j=o[1],u=Object(c.useState)(t.topic),d=Object(a.a)(u,2),h=d[0],p=d[1],f=Object(c.useState)(t.content),m=Object(a.a)(f,2),g=m[0],v=m[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(O.a,{className:"edit-title",onSubmit:function(e){e.preventDefault(),fetch("/blogs/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:l,topic:h,content:g,user_id:r.id})}).then((function(e){return e.json()})).then((function(e){return n(e)}))},children:[Object(b.jsx)(O.a.Group,{className:"mb-3",children:Object(b.jsx)("input",{type:"text",name:"title",autoComplete:"off",value:l,onChange:function(e){return j(e.target.value)}})}),Object(b.jsxs)("label",{children:["Topic:",Object(b.jsxs)("select",{name:"topic",value:h,onChange:function(e){return p(e.target.value)},children:[Object(b.jsx)("option",{value:"tech",children:"tech"}),Object(b.jsx)("option",{value:"lifestyle",children:"lifestyle"}),Object(b.jsx)("option",{value:"entertainment",children:"entertainment"}),Object(b.jsx)("option",{value:"pets",children:"pets"}),Object(b.jsx)("option",{value:"miscellaneous",children:"miscellaneous"})]})]}),Object(b.jsx)("br",{}),Object(b.jsx)(O.a.Group,{className:"mb-3",children:Object(b.jsx)("textarea",{name:"content",rows:"10",cols:"100",autoComplete:"off",value:g,onChange:function(e){return v(e.target.value)}})}),Object(b.jsx)(x.a,{type:"submit",value:"Save",variant:"outline-success",children:"Save"})]}),Object(b.jsx)(x.a,{variant:"outline-danger",size:"sm",onClick:function(){fetch("/blogs/".concat(t.id),{method:"DELETE"}).then((function(){return s(t)}))},children:"Delete Blog"})]})};var U=function(e){var t=e.blog,n=e.currentUser,r=e.updateBlog,s=e.deleteBlog,i=e.setContent,o=e.content,l=Object(c.useState)(!1),j=Object(a.a)(l,2),u=j[0],d=j[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)(g.a,{style:{height:"5rem"},bg:"light",border:"dark",children:Object(b.jsxs)(g.a.Body,{children:[Object(b.jsx)(g.a.Title,{children:t.title}),Object(b.jsx)(g.a.Subtitle,{className:"mb-2 text-muted",children:t.topic})]})}),Object(b.jsx)(g.a.Footer,{children:Object(b.jsxs)("small",{className:"text-muted",children:["Total Views: ",t.views]})}),Object(b.jsx)(x.a,{onClick:function(){return d((function(e){return!e}))},size:"sm",children:u?"Close Edit Page":"Edit Content"}),u?Object(b.jsx)(T,{blog:t,currentUser:n,onUpdateBlog:function(e){var t=o.map((function(t){return t.id===e.id?e:t}));i(t),d(!1),r(e)},handleDelete:function(e){var t=o.filter((function(t){return t.id!==e.id}));i(t),s(e)}}):null]},t.id)};var N=function(e){var t=e.currentUser,n=e.setCurrentUser,r=e.updateBlog,s=e.deleteBlog,i=e.blogs,o=Object(c.useState)(i.filter((function(e){return e.user.id===t.id}))),l=Object(a.a)(o,2),j=l[0],h=l[1];Object(c.useEffect)((function(){h(i.filter((function(e){return e.user.id===t.id})))}),[i,t]);var O=[],p=t.commented_blogs.filter((function(e){return!O.includes(e.id)&&(O.push(e.id),!0)}));return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{children:["Welcome ",t.username]}),Object(b.jsx)(d.a,{src:t.avatar,width:"75",height:"75",className:"d-inline-block align-top",alt:"Sunil's Gym Logo",roundedCircle:!0})]}),Object(b.jsx)(x.a,{variant:"outline-secondary",onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&n(null)}))},children:"Log Out"}),Object(b.jsx)("br",{}),Object(b.jsx)("h3",{children:"Your Content"})]}),Object(b.jsx)(u.a,{children:Object(b.jsx)(B.a,{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",alignItems:"center",justifyContent:"center",height:"50vh"},children:j.map((function(e){return Object(b.jsx)(U,{blog:e,currentUser:t,updateBlog:r,deleteBlog:s,setContent:h,content:j},e.id)}))})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:"Blogs you've commented on:"}),p.map((function(e){return Object(b.jsx)("li",{children:e.title},e.id)}))]})]})};var L=function(e){var t=e.currentUser,n=e.onAddBlog,r=Object(c.useState)(""),s=Object(a.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)("tech"),j=Object(a.a)(l,2),u=j[0],d=j[1],h=Object(c.useState)(""),p=Object(a.a)(h,2),f=p[0],m=p[1],g=Object(c.useState)([]),v=Object(a.a)(g,2),C=v[0],y=v[1];return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{children:[Object(b.jsxs)(O.a,{onSubmit:function(e){e.preventDefault(),e.target.reset();var c={title:i,topic:u,content:f,user_id:t.id,views:0};fetch("/blogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){e.ok?e.json().then((function(e){return n(e)})):e.json().then((function(e){return y(e.errors)}))})),o(""),d(""),m("")},children:[Object(b.jsx)(O.a.Group,{className:"mb-3",children:Object(b.jsxs)(O.a.Label,{children:["Title:",Object(b.jsx)(O.a.Control,{type:"text",name:"title",size:"40",value:i,onChange:function(e){return o(e.target.value)}})]})}),Object(b.jsxs)("label",{children:["Topic:",Object(b.jsxs)("select",{name:"topic",value:u,onChange:function(e){return d(e.target.value)},children:[Object(b.jsx)("option",{value:"tech",children:"tech"}),Object(b.jsx)("option",{value:"lifestyle",children:"lifestyle"}),Object(b.jsx)("option",{value:"entertainment",children:"entertainment"}),Object(b.jsx)("option",{value:"pets",children:"pets"}),Object(b.jsx)("option",{value:"miscellaneous",children:"miscellaneous"})]})]}),Object(b.jsx)(O.a.Group,{className:"mb-3",children:Object(b.jsxs)(O.a.Label,{children:["Content:",Object(b.jsx)("textarea",{name:"content",rows:"20",cols:"100",value:f,onChange:function(e){return m(e.target.value)}})]})}),Object(b.jsx)(x.a,{type:"submit",children:"Make Post"})]}),C?C.map((function(e){return Object(b.jsx)("p",{children:e},e)})):null]})})};n(87);var P=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)([]),l=Object(a.a)(s,2),j=l[0],u=l[1],d=Object(c.useState)(null),O=Object(a.a)(d,2),x=O[0],p=O[1];return Object(c.useEffect)((function(){fetch("http://localhost:3000/blogs").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),Object(c.useEffect)((function(){fetch("/auth").then((function(e){e.ok&&e.json().then((function(e){return p(e)}))}))}),[]),x?Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(h,{currentUser:x,setCurrentUser:p}),Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{exact:!0,path:"/",children:Object(b.jsx)(N,{currentUser:x,setCurrentUser:p,updateBlog:function(e){var t=n.map((function(t){return t.id===e.id?e:t}));r(t)},deleteBlog:function(e){var t=n.filter((function(t){return t.id!==e.id}));console.log(e),r(t);var c=x;c.blogs.filter((function(t){return t.id!==e.id})),p(c)},blogs:n})}),Object(b.jsx)(o.a,{exact:!0,path:"/blogs",children:Object(b.jsx)(C,{blogs:n,setSelectedBlog:u,addViewCount:function(e){fetch("http://localhost:3000/blogs/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({views:parseInt(e.views)+1})}).then((function(e){return e.json()})).then((function(e){return function(e){var t=n.map((function(t){return t.id===e.id?e:t}));r(t)}(e)}))}})}),Object(b.jsx)(o.a,{exact:!0,path:"/blogs/:id",children:Object(b.jsx)(w,{selectedBlog:j,currentUser:x,setSelectedBlog:u})}),Object(b.jsx)(o.a,{exact:!0,path:"/createpost",children:Object(b.jsx)(L,{currentUser:x,onAddBlog:function(e){r((function(t){return[].concat(Object(i.a)(t),[e])}));var t=x;t.blogs.push(e),p(t)}})})]})]}):Object(b.jsx)(m,{setCurrentUser:p})};s.a.render(Object(b.jsx)(l.a,{children:Object(b.jsx)(P,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.386449c6.chunk.js.map