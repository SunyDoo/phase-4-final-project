(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{76:function(e,t,n){},77:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(23),s=n.n(r),a=(n(76),n(30)),i=n(6),o=(n(77),n(12)),l=n(22),j=n(54),u=n(67),b=n(49),d=n(0);var h=function(){return Object(d.jsxs)(j.a,{bg:"dark",variant:"dark",children:[Object(d.jsx)(j.a.Brand,{children:Object(d.jsx)(b.a,{src:"https://t4.ftcdn.net/jpg/04/11/39/77/360_F_411397771_TYwKZCENTf7RJUuxll4tqjrxbkvkAC9U.jpg",width:"75",height:"75",className:"d-inline-block align-top",alt:"Sunil's Gym Logo",roundedCircle:!0})}),Object(d.jsx)(j.a.Brand,{children:"Sunil's BlogSpot"}),Object(d.jsxs)(u.a,{children:[Object(d.jsx)(l.b,{to:"/",exact:!0,style:{color:"white"},children:"Home Page"}),Object(d.jsx)(l.b,{to:"/blogs",exact:!0,style:{color:"white"},children:"Blogs"}),Object(d.jsx)(l.b,{to:"/createpost",exact:!0,style:{color:"white"},children:"Create Post"})]})]})},O=n(8),x=n(10);var p=function(e){var t=e.setCurrentUser,n=Object(c.useState)(""),r=Object(i.a)(n,2),s=r[0],a=r[1],o=Object(c.useState)(""),l=Object(i.a)(o,2),j=l[0],u=l[1],b=Object(c.useState)([]),h=Object(i.a)(b,2),p=h[0],m=h[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(O.a,{onSubmit:function(e){e.preventDefault();var n={username:s,password:j};fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){e.ok?e.json().then((function(e){return t(e)})):e.json().then((function(e){return m(e.errors)}))}))},children:[Object(d.jsxs)(O.a.Group,{className:"mb-3",children:[Object(d.jsx)(O.a.Label,{children:"Username"}),Object(d.jsx)("input",{type:"text",id:"username",value:s,onChange:function(e){return a(e.target.value)}})]}),Object(d.jsxs)(O.a.Group,{className:"mb-3",children:[Object(d.jsx)(O.a.Label,{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",id:"password",value:j,onChange:function(e){return u(e.target.value)}})]}),Object(d.jsx)(x.a,{type:"submit",children:"Log In"})]}),p?p.map((function(e){return Object(d.jsx)("p",{children:e},e)})):null]})};var m=function(e){var t=e.setCurrentUser,n=Object(c.useState)(""),r=Object(i.a)(n,2),s=r[0],a=r[1],o=Object(c.useState)(""),l=Object(i.a)(o,2),j=l[0],u=l[1],b=Object(c.useState)(""),h=Object(i.a)(b,2),p=h[0],m=h[1],f=Object(c.useState)([]),g=Object(i.a)(f,2),v=g[0],C=g[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(O.a,{onSubmit:function(e){e.preventDefault();var n={username:s,password:j,avatar:p};fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){e.ok?e.json().then((function(e){return t(e)})):e.json().then((function(e){return C(e.errors)}))}))},children:[Object(d.jsx)(O.a.Group,{className:"mb-3",children:Object(d.jsxs)(O.a.Label,{children:["Username",Object(d.jsx)(O.a.Control,{type:"text",id:"username",value:s,onChange:function(e){return a(e.target.value)}})]})}),Object(d.jsx)(O.a.Group,{className:"mb-3",children:Object(d.jsxs)(O.a.Label,{children:["Password",Object(d.jsx)(O.a.Control,{type:"password",id:"password",value:j,onChange:function(e){return u(e.target.value)}})]})}),Object(d.jsx)(O.a.Group,{className:"mb-3",children:Object(d.jsxs)(O.a.Label,{children:["Avatar",Object(d.jsx)(O.a.Control,{type:"text",id:"avatar",value:p,onChange:function(e){return m(e.target.value)}})]})}),Object(d.jsx)(x.a,{type:"submit",children:"Sign Up"})]}),v?v.map((function(e){return Object(d.jsx)("p",{children:e},e)})):null]})};var f=function(e){var t=e.setCurrentUser,n=Object(c.useState)(!0),r=Object(i.a)(n,2),s=r[0],a=r[1];return Object(d.jsx)("div",{style:{alignItems:"center",justifyContent:"center",height:"50vh"},children:s?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p,{setCurrentUser:t}),Object(d.jsxs)("p",{children:["Don't have an account?",Object(d.jsx)(x.a,{onClick:function(){return a(!1)},children:"Sign Up"})]})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m,{setCurrentUser:t}),Object(d.jsxs)("p",{children:["Already have an account?",Object(d.jsx)(x.a,{onClick:function(){return a(!0)},children:"Log In"})]})]})})},g=n(33);var v=function(e){var t=e.blog,n=e.selectedBlog,c=e.addViewCount;return Object(d.jsx)(u.a,{children:Object(d.jsxs)(g.a,{style:{width:"18rem"},bg:"light",border:"dark",children:[Object(d.jsx)(l.b,{to:"/blogs/".concat(t.id),exact:!0,onClick:function(){n(t),c(t)},children:Object(d.jsx)(g.a.Title,{children:t.title})}),Object(d.jsxs)("p",{children:["Posted by: ",t.user.username]}),Object(d.jsxs)("small",{className:"text-muted",children:["Views: ",t.views]})]})})};var C=function(e){var t=e.blogs,n=e.selectedBlog,c=e.addViewCount;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",alignItems:"center",justifyContent:"center",height:"50vh"},children:t.map((function(e){return Object(d.jsx)(v,{blog:e,selectedBlog:n,addViewCount:c},e.id)}))})})};var y=function(e){var t=e.comment,n=e.updateComment;return Object(d.jsx)("ul",{style:{listStyleType:"none"},children:Object(d.jsxs)("li",{children:[Object(d.jsxs)("p",{children:[t.content," - ",t.user.username]}),Object(d.jsx)(x.a,{variant:"outline-success",onClick:function(e){e.preventDefault(),fetch("http://localhost:3000/comments/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({likes:parseInt(t.likes)+1})}).then((function(e){return e.json()})).then((function(e){return n(e)}))},children:Object(d.jsxs)("span",{role:"img","aria-label":"like",children:["\ud83d\udc4d",t.likes]})}),Object(d.jsx)(x.a,{variant:"outline-danger",onClick:function(e){e.preventDefault(),fetch("http://localhost:3000/comments/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({dislikes:parseInt(t.dislikes)+1})}).then((function(e){return e.json()})).then((function(e){return n(e)}))},children:Object(d.jsxs)("span",{role:"img","aria-label":"dislike",children:["\ud83d\udc4e",t.dislikes]})})]})})};var S=function(e){var t=e.blog,n=e.currentUser,r=e.onAddComment,s=Object(c.useState)(""),a=Object(i.a)(s,2),o=a[0],l=a[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={content:o,blog_id:t.id,user_id:n.id,likes:0,dislikes:0};fetch("http://localhost:3000/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){return r(e)})),l("")},children:[Object(d.jsxs)("label",{children:["Comment:",Object(d.jsx)("input",{type:"text",name:"content",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(d.jsx)(x.a,{type:"submit",children:"Leave Comment"})]})})})},k=n(40);var w=function(e){var t=e.blog,n=e.currentUser,r=Object(c.useState)(!1),s=Object(i.a)(r,2),o=s[0],j=s[1],u=Object(c.useState)(t.comments),b=Object(i.a)(u,2),h=b[0],O=b[1];function p(e){var t=h.map((function(t){return t.id===e.id?e:t}));O(t)}return Object(d.jsxs)(k.a.Dialog,{children:[Object(d.jsxs)(k.a.Title,{children:[Object(d.jsx)("h1",{children:t.title}),Object(d.jsx)("h3",{children:t.topic}),Object(d.jsxs)("h4",{children:["Author: ",t.user.username]})]}),Object(d.jsx)(k.a.Body,{children:Object(d.jsx)("p",{children:t.content})}),Object(d.jsx)("br",{}),Object(d.jsxs)(k.a.Footer,{style:{alignItems:"center",justifyContent:"center"},children:[Object(d.jsx)("h5",{style:{display:"inline-block"},children:"Comments"}),o?null:Object(d.jsx)(x.a,{onClick:function(){j((function(e){return!e}))},children:"Leave a Comment"})]}),o?Object(d.jsx)(S,{blog:t,currentUser:n,onAddComment:function(e){O((function(t){return[].concat(Object(a.a)(t),[e])}))}}):null,h.map((function(e){return Object(d.jsx)(y,{comment:e,updateComment:p},e.id)})),Object(d.jsx)(l.b,{to:"/blogs",children:Object(d.jsx)("p",{children:"Return to Blogs"})})]})};var T=function(e){var t=e.blog,n=e.onUpdateBlog,r=e.currentUser,s=e.handleDelete,a=Object(c.useState)(t.title),o=Object(i.a)(a,2),l=o[0],j=o[1],u=Object(c.useState)(t.topic),b=Object(i.a)(u,2),h=b[0],p=b[1],m=Object(c.useState)(t.content),f=Object(i.a)(m,2),g=f[0],v=f[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(O.a,{className:"edit-title",onSubmit:function(e){e.preventDefault(),fetch("http://localhost:3000/blogs/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:l,topic:h,content:g,user_id:r.id})}).then((function(e){return e.json()})).then((function(e){return n(e)}))},children:[Object(d.jsx)(O.a.Group,{className:"mb-3",children:Object(d.jsx)("input",{type:"text",name:"title",autoComplete:"off",value:l,onChange:function(e){return j(e.target.value)}})}),Object(d.jsx)(O.a.Group,{className:"mb-3",children:Object(d.jsx)("input",{type:"text",name:"topic",autoComplete:"off",value:h,onChange:function(e){return p(e.target.value)}})}),Object(d.jsx)("br",{}),Object(d.jsx)(O.a.Group,{className:"mb-3",children:Object(d.jsx)("textarea",{name:"content",rows:"10",cols:"100",autoComplete:"off",value:g,onChange:function(e){return v(e.target.value)}})}),Object(d.jsx)(x.a,{type:"submit",value:"Save",variant:"outline-success",children:"Save"})]}),Object(d.jsx)(x.a,{variant:"outline-danger",size:"sm",onClick:function(){fetch("http://localhost:3000/blogs/".concat(t.id),{method:"DELETE"}).then((function(){return s(t)}))},children:"Delete Blog"})]})},U=n(70);var N=function(e){var t=e.currentUser,n=e.setCurrentUser,r=e.updateBlog,s=e.deleteBlog,a=Object(c.useState)(!1),o=Object(i.a)(a,2),l=o[0],j=o[1],h=Object(c.useState)(t.blogs),O=Object(i.a)(h,2),p=O[0],m=O[1];function f(e){var t=p.map((function(t){return t.id===e.id?e:t}));m(t),j(!1),r(e)}function v(e){var t=p.filter((function(t){return t.id!==e.id}));m(t),s(e)}return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("h1",{children:["Welcome ",t.username]}),Object(d.jsx)(b.a,{src:t.avatar,width:"75",height:"75",className:"d-inline-block align-top",alt:"Sunil's Gym Logo",roundedCircle:!0})]}),Object(d.jsx)(x.a,{variant:"outline-secondary",onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&n(null)}))},children:"Log Out"}),Object(d.jsx)("br",{}),Object(d.jsx)("h3",{children:"Your Content"}),Object(d.jsx)(x.a,{onClick:function(){return j((function(e){return!e}))},size:"sm",children:l?"Close Edit Page":"Edit Content"})]}),Object(d.jsx)(u.a,{children:Object(d.jsx)(U.a,{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",alignItems:"center",justifyContent:"center",height:"50vh"},children:p.map((function(e){return Object(d.jsxs)("div",{children:[Object(d.jsx)(g.a,{style:{height:"5rem"},bg:"light",border:"dark",children:Object(d.jsxs)(g.a.Body,{children:[Object(d.jsx)(g.a.Title,{children:e.title}),Object(d.jsx)(g.a.Subtitle,{className:"mb-2 text-muted",children:e.topic})]})}),Object(d.jsx)(g.a.Footer,{children:Object(d.jsxs)("small",{className:"text-muted",children:["Total Views: ",e.views]})}),l?Object(d.jsx)(T,{blog:e,currentUser:t,onUpdateBlog:f,handleDelete:v}):null]},e.id)}))})})]})};var B=function(e){var t=e.currentUser,n=e.onAddBlog,r=Object(c.useState)(""),s=Object(i.a)(r,2),a=s[0],o=s[1],l=Object(c.useState)(""),j=Object(i.a)(l,2),u=j[0],b=j[1],h=Object(c.useState)(""),p=Object(i.a)(h,2),m=p[0],f=p[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{children:Object(d.jsxs)(O.a,{onSubmit:function(e){e.preventDefault(),e.target.reset();var c={title:a,topic:u,content:m,user_id:t.id,views:0};fetch("http://localhost:3000/blogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){return n(e)})),o(""),b(""),f("")},children:[Object(d.jsx)(O.a.Group,{className:"mb-3",children:Object(d.jsxs)(O.a.Label,{children:["Title:",Object(d.jsx)(O.a.Control,{type:"text",name:"title",size:"40",value:a,onChange:function(e){return o(e.target.value)}})]})}),Object(d.jsxs)("label",{children:["Topic:",Object(d.jsxs)("select",{name:"category",value:u,onChange:function(e){return b(e.target.value)},children:[Object(d.jsx)("option",{value:"tech",children:"tech"}),Object(d.jsx)("option",{value:"lifestyle",children:"lifestyle"}),Object(d.jsx)("option",{value:"entertainment",children:"entertainment"}),Object(d.jsx)("option",{value:"pets",children:"pets"}),Object(d.jsx)("option",{value:"miscellaneous",children:"miscellaneous"})]})]}),Object(d.jsx)(O.a.Group,{className:"mb-3",children:Object(d.jsxs)(O.a.Label,{children:["Content:",Object(d.jsx)("textarea",{name:"content",rows:"20",cols:"100",value:m,onChange:function(e){return f(e.target.value)}})]})}),Object(d.jsx)(x.a,{type:"submit",children:"Make Post"})]})})})};n(87);var L=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)([]),l=Object(i.a)(s,2),j=l[0],u=l[1],b=Object(c.useState)(""),O=Object(i.a)(b,2),x=O[0],p=O[1];return Object(c.useEffect)((function(){fetch("http://localhost:3000/blogs").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),Object(c.useEffect)((function(){fetch("/auth").then((function(e){e.ok&&e.json().then((function(e){return p(e)}))}))}),[]),x?Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(h,{currentUser:x,setCurrentUser:p}),Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{exact:!0,path:"/",children:Object(d.jsx)(N,{currentUser:x,setCurrentUser:p,updateBlog:function(e){var t=n.map((function(t){return t.id===e.id?e:t}));r(t)},deleteBlog:function(e){var t=n.filter((function(t){return t.id!==e.id}));r(t)}})}),Object(d.jsx)(o.a,{exact:!0,path:"/blogs",children:Object(d.jsx)(C,{blogs:n,selectedBlog:u,addViewCount:function(e){fetch("http://localhost:3000/blogs/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({views:parseInt(e.views)+1})}).then((function(e){return e.json()})).then((function(e){return function(e){var t=n.map((function(t){return t.id===e.id?e:t}));r(t)}(e)}))}})}),Object(d.jsx)(o.a,{exact:!0,path:"/blogs/".concat(j.id),children:Object(d.jsx)(w,{blog:j,currentUser:x})}),Object(d.jsx)(o.a,{exact:!0,path:"/createpost",children:Object(d.jsx)(B,{currentUser:x,onAddBlog:function(e){r((function(t){return[].concat(Object(a.a)(t),[e])}))}})})]})]}):Object(d.jsx)(f,{setCurrentUser:p})};s.a.render(Object(d.jsx)(l.a,{children:Object(d.jsx)(L,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.2925ca47.chunk.js.map